package com.revature.project0;

import java.util.Iterator;
import java.util.Scanner;

public class Employee extends UsersAbstract {
	
	public Employee(String username, String password) {
		
		super.username = username;
		super.password = password;
		
	}
	
	public void addCar(double startingPrice, String make) {
		
		Project0.cars.add(new Cars(startingPrice, make));
		
	}
	
	public void removeCar(int serialNumber) {
		
		for(Cars i : Project0.cars) {
			if(i.serialNumber == serialNumber) {
				Project0.cars.remove(i);
				System.out.println("Car Removed");
				break;
			}
		}
	}
	
	public void reviewOffers(Scanner scanner) {
		//Printing all offers 
		System.out.println("------------------------------");
		for(Offers i : Project0.offers) {
			System.out.println("Car Make: " + i.getMake());
			System.out.println("Identification number: " + i.getSerial());
			System.out.println("Customer Username" + i.getCustomer());
			System.out.println("Offer Amount: " + i.getOffer());
			System.out.println("Offer ID: " + i.ID);
			System.out.println("------------------------------");
		}
		
		//getting employee input
		String temp;
		int id;
		int serial = -1;
		
		System.out.println("Would you like to accept any offers? Y/N");
		temp = scanner.nextLine();
		if(temp.contains("Y") || temp.contains("y")) {
			System.out.println("What offer would you like to accept? \n "
					+ "Please enter the offer ID");
			temp =  scanner.nextLine();
		    
			id = Integer.parseInt(temp);
		    
			//adds the car to the Customers myCars Hash set and sets the payments up
		    for(Offers i : Project0.offers) {//loop 1
		    	
		    	if(i.ID == id) {
		    		
		    		serial = i.getSerial();
		    		for(Cars j : Project0.cars) {//loop 2
		    			
		    			if(i.getSerial()==j.serialNumber) {
		    				
		    				j.setOwner(i.getCustomer(), i.getOffer());
		    				
		    				for(UsersAbstract k : Project0.userData) {// loop 3
		    					
		    					if(i.getCustomer().equals(k.username)) {
		    						Customer tempCust = (Customer) k;
		    						tempCust.myCars.add(j);
		    						break;//break out of loop 3
		    					}
		    				}
		    				break;//break out of loop 2
		    			}
		    		}
		    		break;//break out of loop 1
		    	}
		    }
		    
		    for(Iterator<Offers> iterator = Project0.offers.iterator(); iterator.hasNext();) {
		    	Offers tempOffer = iterator.next();
		    	if(tempOffer.getSerial() == serial) {
		    		iterator.remove();
		    		System.out.println("Removed offer " + tempOffer.ID);
		    	}
		    }
		    
		}else {
			
		}
		
	}
}
